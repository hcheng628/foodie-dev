<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="us.supercheng.mapper.ItemsMapperCustom" >
    <select id="getCommentsByLevel" resultType="us.supercheng.vo.ItemCommentVO" parameterType="Map">
    SELECT
        u.nickname as `nickname`,
        u.face as `userFace`,
        c.sepc_name as `specName`,
        c.content as `content`,
        c.created_time as `createdTime`
    FROM
        items i
    LEFT JOIN items_comments c ON i.id = c.item_id
    LEFT JOIN users u on c.user_id = u.id
    WHERE
        i.id = #{paraMap.id}
    <if test="paraMap.level != null and paraMap.level != ''">
        AND
        c.comment_level = #{paraMap.level}
    </if>
    </select>
</mapper>